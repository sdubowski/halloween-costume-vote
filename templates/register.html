{% extends "base.html" %}
{% block content %}

<style>
  .register-wrap {
    max-width: 420px;
    margin: 60px auto;
    background: #151522;
    border: 1px solid #28283a;
    border-radius: .8rem;
    padding: 24px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
  }

  .register-wrap h1 {
    font-size: 1.4rem;
    font-weight: 600;
    color: #ff6600;
    text-align: center;
    margin-bottom: 20px;
  }

  .form-label {
    font-weight: 500;
  }

  .btn-primary {
    background-color: #ff6600;
    border-color: #ff6600;
    color: #fff;
    width: 100%;
  }
  .btn-primary:hover {
    background-color: #ff7e1a;
    border-color: #ff7e1a;
  }

  @media (max-width: 576px) {
    .register-wrap {
      margin: 20px;
      padding: 16px;
    }
  }
</style>

<div class="register-wrap">
  <h1>Dołącz do wydarzenia: {{ event.name }}</h1>

  <form method="post" enctype="multipart/form-data" action="{{ url_for('do_join', event_id=event.id) }}">
    <div class="mb-3">
      <label class="form-label">Imię</label>
      <input type="text" class="form-control" name="name" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Zdjęcie</label>
      <input type="file" class="form-control" name="photo" accept=".jpg,.jpeg,.png,.webp,.heic,.heif">
    </div>

    <button id="joinBtn" class="btn btn-primary">Zapisz</button>
  </form>
</div>

<script>
  (function(){
    const btn = document.getElementById('joinBtn');
    const form = btn.closest('form');
    form.addEventListener('submit', () => {
      btn.disabled = true;
      btn.textContent = 'Zapisywanie...';
    }, { once: true });
  })();
</script>

{% endblock %}
