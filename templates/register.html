{% extends "base.html" %}
{% block content %}
<h1 class="h4 mb-3">Dołącz do wydarzenia: {{ event.name }}</h1>

<form method="post" enctype="multipart/form-data" action="{{ url_for('do_join', event_id=event.id) }}">
  <div class="mb-3">
    <label class="form-label">Imię</label>
    <input type="text" class="form-control" name="name" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Zdjęcie (opcjonalnie)</label>
    <input type="file" class="form-control" name="photo" accept=".jpg,.jpeg,.png,.webp,.heic,.heif">
  </div>

  <button id="joinBtn" class="btn btn-primary">Zapisz</button>
</form>

<script>
  (function(){
    const btn = document.getElementById('joinBtn');
    const form = btn.closest('form');
    form.addEventListener('submit', () => {
      btn.disabled = true;
      btn.textContent = 'Zapisywanie...';
    }, { once: true });
  })();
</script>
{% endblock %}
